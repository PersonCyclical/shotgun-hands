[gd_scene load_steps=4 format=3 uid="uid://c31qwtlxdvjm1"]

[ext_resource type="Texture2D" uid="uid://nyo1b4w3jgxv" path="res://Actors/Enemies/Antimony/iceball.png" id="1_46op8"]

[sub_resource type="GDScript" id="GDScript_x1vad"]
resource_name = "iceBall"
script/source = "class_name IceBall
extends HitableCharacterBody
	
var player:Node2D          = null
var SPEED = 200
var spikeScene = preload(\"res://Actors/Enemies/Antimony/antimony_spike.tscn\")
func _ready():
	player = get_tree().get_nodes_in_group(\"Player\")[0]

	var dir_to_player = (player.global_position - global_position).normalized()
	velocity.x = SPEED * dir_to_player.x
	velocity.y = SPEED * dir_to_player.y

func _physics_process(_delta):
	if !is_on_floor(): velocity.y += 20
	move_and_slide()


func _on_timer_timeout():
	var spike = spikeScene.instantiate()
	add_sibling(spike)
	destroy()
"

[sub_resource type="RectangleShape2D" id="RectangleShape2D_hnoq4"]
size = Vector2(8, 8)

[node name="iceBall" type="CharacterBody2D" groups=["iceBall"]]
position = Vector2(0, -15)
floor_stop_on_slope = false
floor_constant_speed = true
script = SubResource("GDScript_x1vad")

[node name="iceBall" type="Sprite2D" parent="."]
texture = ExtResource("1_46op8")

[node name="Hitbox" type="CollisionShape2D" parent="."]
shape = SubResource("RectangleShape2D_hnoq4")
one_way_collision = true

[node name="Timer" type="Timer" parent="."]
wait_time = 3.0
one_shot = true
autostart = true

[connection signal="timeout" from="Timer" to="." method="_on_timer_timeout"]
